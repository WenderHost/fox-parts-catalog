(this["webpackJsonpfox-configurator"]=this["webpackJsonpfox-configurator"]||[]).push([[11],{560:function(e,a,t){"use strict";t.r(a);var n=t(379),l=t(370),o=t(371),s=t(373),r=t(372),c=t(380),m=t(374),i=t(39),u=t.n(i),d=t(394),h=t(393),p=t.n(h),g=t(398),f=t.n(g),v=(t(399),t(400),function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(s.a)(this,Object(r.a)(a).call(this,e))).state={email:"",password:""},t.handleChange=t.handleChange.bind(Object(c.a)(t)),t.handleLogin=t.handleLogin.bind(Object(c.a)(t)),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"handleChange",value:function(e){var a={};a[e.target.name]=e.target.value,this.setState(a)}},{key:"handleLogin",value:function(){var e=this.state,a=e.email,t=e.password,n=this.props.hydrateStateWithLocalStorage;console.log("auth_root = ",d.e),p()({method:"post",url:d.e,data:{username:a,password:t}}).then((function(e){console.log("Saving userData to `localStorage`...",e.data),localStorage.setItem("foxselect-userdata",JSON.stringify(e.data)),localStorage.setItem("foxselect-currentview","loggedin"),f.a.success("Login was successful.",{position:"top",effect:"slide",timeout:1e3,onClose:function(){n()}})})).catch((function(e){e.response?f.a.error(e.response.data.message,{position:"top",effect:"slide",timeout:21e3,html:!0}):e.request?console.log(e.request):console.log("Error",e.message),console.log("error.config = ",e.config)}))}},{key:"render",value:function(){return u.a.createElement("form",null,u.a.createElement("h3",null,"Login to Your Account"),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement("input",{type:"email",name:"email",className:"form-control",placeholder:"Email",value:this.state.email,onChange:this.handleChange}))),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.handleChange}))),u.a.createElement("hr",null),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col text-right"},u.a.createElement("button",{type:"button",className:"btn btn-primary",name:"checkout-guest",onClick:this.handleLogin},"Login"))))}}]),a}(i.Component)),y=t(413),E=t(377),b=t(414),C=t(401),_=t(487),w=t.n(_),N=function(e){function a(){var e;return Object(l.a)(this,a),(e=Object(s.a)(this,Object(r.a)(a).call(this))).state={new_user:{username:"",name:"",first_name:"",last_name:"",email:"",password:null,company_name:"",company_type:"",company_street:"",company_city:"",company_state:"",company_zip:"",company_country:""},isRegistering:!1},e.handleChange=e.handleChange.bind(Object(c.a)(e)),e.handleChangeCompanyType=e.handleChangeCompanyType.bind(Object(c.a)(e)),e.handleChangeCompanyState=e.handleChangeCompanyState.bind(Object(c.a)(e)),e.handleRegister=e.handleRegister.bind(Object(c.a)(e)),e.handlePassword=e.handlePassword.bind(Object(c.a)(e)),e}return Object(m.a)(a,e),Object(o.a)(a,[{key:"handleRegister",value:function(e){var a=this;console.clear(),console.log("[Login.js]->handleRegister()");var t=this.state.new_user;this.setState({isRegistering:!0});var n={},l={};for(var o in t)t.hasOwnProperty(o)&&(-1<o.indexOf("company_")?l[o]=t[o]:n[o]=t[o]);n.meta=l,d.d.then((function(e){var t={method:"post",url:d.b+"wp/v2/users",data:n,headers:{Authorization:"Bearer "+e}};p()(t).then((function(e){var t=e.status;switch(console.log("[WP REST] We attempted to create a user.\n\u2022 httpStatusCode =",t,"\n\u2022 response = ",e),t){case 200:case 201:y.a.validateUser(d.e,n.email,n.password).then((function(e){a.props.hydrateStateWithLocalStorage()})).catch((function(e){console.log("WP.validateUser returned error = ",e)})).finally((function(){a.setState({isRegistering:!1})}));break;default:console.log("No logic for handling httpStatusCode = ",t)}})).catch((function(e){if(a.setState({isRegistering:!1}),e.response){var t=e.response.data;console.log("\n\nresponseData = ",t);var n=t.data&&"undefined"!==typeof t.data.code?t.data.code:t.code;console.log("error_code = ",n);var l="";switch(n){case"rest_missing_callback_param":var o="";("undefined"!==typeof t.data.params?t.data.params:["params not found"]).forEach((function(e){o+="<li>"+e+"</li>"})),l='<p><strong>MISSING REQUIRED FIELDS</strong><br/>Please fill out the following required fields:</p><ul style="margin-bottom: 0">'+o+"</ul>";break;default:l=t.message}f.a.closeAll(),f.a.error(l,{position:"top",effect:"slide",timeout:21e3,html:!0})}else e.request?console.log(e.request):console.log("Error: ",e);"undefined"!==typeof e.config&&console.log(e.config)}))}))}},{key:"handleChange",value:function(e){var a=this.state.new_user;a[e.target.name]=e.target.value,a.name=""!==a.first_name&&""!==a.last_name?a.first_name+" "+a.last_name:"",a.username=""!==a.email?a.email:"",this.setState({new_user:a})}},{key:"handleChangeCompanyType",value:function(e){var a=this.state.new_user;a.company_type=e.value,this.setState({new_user:a})}},{key:"handleChangeCompanyState",value:function(e){var a=this.state.new_user;a.company_state=e.value,this.setState({new_user:a})}},{key:"handlePassword",value:function(e,a){if(e.isValid){var t=this.state.new_user;t.password=e.password,this.setState({new_user:t})}}},{key:"render",value:function(){var e=this.props.user,a=this.state.new_user,t=a.company_type;if(""!==t)for(var l=0;l<C.b.length;l++){var o=C.b[l];t===o.value&&(t=o)}var s=a.company_state;if(""!==s)for(var r=0;r<C.g.length;r++){var c=C.g[r];s===c.value&&(s=c)}var m=e?u.a.createElement("div",null,u.a.createElement("h3",null,"Your Account Details"),u.a.createElement("p",null,"Welcome back ",u.a.createElement("em",null,e.user_display_name),"."),u.a.createElement("table",{className:"table table-sm"},u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("td",null,"Your email:"),u.a.createElement("td",null,e.user_email)),u.a.createElement("tr",null,u.a.createElement("td",null,"Your status:"),u.a.createElement("td",null,e.status)))),u.a.createElement("div",{className:"text-right"},u.a.createElement("hr",null),u.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:y.a.logoutUser},"Logout"))):u.a.createElement(v,{hydrateStateWithLocalStorage:this.props.hydrateStateWithLocalStorage}),i={option:function(e,a){var t=a.data;a.isDisabled,a.isFocused,a.isSelected;return Object(n.a)({},e,{fontSize:""===t.value?"13px":"16px"})}};return u.a.createElement("div",{className:"checkout"},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg"},m),u.a.createElement("div",{className:"col-lg"},u.a.createElement("h3",null,"Create an Account"),u.a.createElement("form",null,u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"First name",name:"first_name",value:a.first_name,onChange:this.handleChange})),u.a.createElement("div",{className:"col"},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"Last name",name:"last_name",value:a.last_name,onChange:this.handleChange}))),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement("input",{type:"email",className:"form-control",placeholder:"Your company email",autoComplete:"off",name:"email",value:a.email,onChange:this.handleChange}))),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement(w.a,{style:{border:"none"},inputProps:{className:"form-control",placeholder:"Password",autoComplete:"new-password"},minLength:5,minScore:2,changeCallback:this.handlePassword}))),u.a.createElement("hr",null),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col-md-9"},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"Company/Account Name",autoComplete:"off",name:"company_name",value:a.company_name,onChange:this.handleChange})),u.a.createElement("div",{className:"col-md-3"},u.a.createElement(E.a,{name:"company_type",onChange:this.handleChangeCompanyType,placeholder:"Type...",options:C.b,value:t}))),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement("textarea",{className:"form-control",name:"company_street",rows:"2",placeholder:"Address",onChange:this.handleChange,value:a.company_street}))),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"City",name:"company_city",value:a.company_city,onChange:this.handleChange})),u.a.createElement("div",{className:"col"},u.a.createElement(b.a,{onChange:this.handleChangeCompanyState,multi:!1,placeholder:"State/Prov/Region...",name:"company_state",options:C.g,styles:i})),u.a.createElement("div",{className:"col-md-2"},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"Zip",name:"company_zip",value:a.company_zip,onChange:this.handleChange}))),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col"},u.a.createElement("input",{type:"text",className:"form-control",placeholder:"Country",name:"company_country",value:a.company_country,onChange:this.handleChange}))),u.a.createElement("hr",null),u.a.createElement("div",{className:"form-row"},u.a.createElement("div",{className:"col text-right"},u.a.createElement("p",null,u.a.createElement("small",null,"All fields are required unless noted.")),!this.state.isRegistering&&u.a.createElement("button",{type:"button",className:"btn btn-primary",name:"register-user",onClick:this.handleRegister},"Register"),this.state.isRegistering&&u.a.createElement("button",{type:"button",className:"btn btn-secondary",name:"register-user",disabled:"disabled"},"Register")))))))}}]),a}(i.Component);a.default=N}}]);
//# sourceMappingURL=11.65e91d63.chunk.js.map