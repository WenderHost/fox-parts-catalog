(this["webpackJsonpfox-configurator"]=this["webpackJsonpfox-configurator"]||[]).push([[11],{539:function(e,a,t){"use strict";t.r(a);var n=t(368),l=t(360),o=t(361),s=t(369),r=t(363),c=t(362),m=t(39),i=t.n(m),u=t(373),d=t(372),h=t.n(d),p=t(376),g=t.n(p),f=(t(377),t(378),function(e){Object(r.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={email:"",password:""},n.handleChange=n.handleChange.bind(Object(s.a)(n)),n.handleLogin=n.handleLogin.bind(Object(s.a)(n)),n}return Object(o.a)(t,[{key:"handleChange",value:function(e){var a={};a[e.target.name]=e.target.value,this.setState(a)}},{key:"handleLogin",value:function(){var e=this.state,a=e.email,t=e.password,n=this.props.hydrateStateWithLocalStorage;console.log("auth_root = ",u.e),h()({method:"post",url:u.e,data:{username:a,password:t}}).then((function(e){console.log("Saving userData to `localStorage`...",e.data),localStorage.setItem("foxselect-userdata",JSON.stringify(e.data)),localStorage.setItem("foxselect-currentview","loggedin"),g.a.success("Login was successful.",{position:"top",effect:"slide",timeout:1e3,onClose:function(){n()}})})).catch((function(e){e.response?g.a.error(e.response.data.message,{position:"top",effect:"slide",timeout:21e3,html:!0}):e.request?console.log(e.request):console.log("Error",e.message),console.log("error.config = ",e.config)}))}},{key:"render",value:function(){return i.a.createElement("form",null,i.a.createElement("h3",null,"Login to Your Account"),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement("input",{type:"email",name:"email",className:"form-control",placeholder:"Email",value:this.state.email,onChange:this.handleChange}))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.handleChange}))),i.a.createElement("hr",null),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col text-right"},i.a.createElement("button",{type:"button",className:"btn btn-primary",name:"checkout-guest",onClick:this.handleLogin},"Login"))))}}]),t}(m.Component)),v=t(391),y=t(366),E=t(392),b=t(379),C=t(465),_=t.n(C),w=function(e){Object(r.a)(t,e);var a=Object(c.a)(t);function t(){var e;return Object(l.a)(this,t),(e=a.call(this)).state={new_user:{username:"",name:"",first_name:"",last_name:"",email:"",password:null,company_name:"",company_type:"",company_street:"",company_city:"",company_state:"",company_zip:"",company_country:""},isRegistering:!1},e.handleChange=e.handleChange.bind(Object(s.a)(e)),e.handleChangeCompanyType=e.handleChangeCompanyType.bind(Object(s.a)(e)),e.handleChangeCompanyState=e.handleChangeCompanyState.bind(Object(s.a)(e)),e.handleRegister=e.handleRegister.bind(Object(s.a)(e)),e.handlePassword=e.handlePassword.bind(Object(s.a)(e)),e}return Object(o.a)(t,[{key:"handleRegister",value:function(e){var a=this;console.clear(),console.log("[Login.js]->handleRegister()");var t=this.state.new_user;this.setState({isRegistering:!0});var n={},l={};for(var o in t)t.hasOwnProperty(o)&&(-1<o.indexOf("company_")?l[o]=t[o]:n[o]=t[o]);n.meta=l,u.d.then((function(e){var t={method:"post",url:u.b+"wp/v2/users",data:n,headers:{Authorization:"Bearer "+e}};h()(t).then((function(e){var t=e.status;switch(console.log("[WP REST] We attempted to create a user.\n\u2022 httpStatusCode =",t,"\n\u2022 response = ",e),t){case 200:case 201:v.a.validateUser(u.e,n.email,n.password).then((function(e){a.props.hydrateStateWithLocalStorage()})).catch((function(e){console.log("WP.validateUser returned error = ",e)})).finally((function(){a.setState({isRegistering:!1})}));break;default:console.log("No logic for handling httpStatusCode = ",t)}})).catch((function(e){if(a.setState({isRegistering:!1}),e.response){var t=e.response.data;console.log("\n\nresponseData = ",t);var n=t.data&&"undefined"!==typeof t.data.code?t.data.code:t.code;console.log("error_code = ",n);var l="";switch(n){case"rest_missing_callback_param":var o="";("undefined"!==typeof t.data.params?t.data.params:["params not found"]).forEach((function(e){o+="<li>"+e+"</li>"})),l='<p><strong>MISSING REQUIRED FIELDS</strong><br/>Please fill out the following required fields:</p><ul style="margin-bottom: 0">'+o+"</ul>";break;default:l=t.message}g.a.closeAll(),g.a.error(l,{position:"top",effect:"slide",timeout:21e3,html:!0})}else e.request?console.log(e.request):console.log("Error: ",e);"undefined"!==typeof e.config&&console.log(e.config)}))}))}},{key:"handleChange",value:function(e){var a=this.state.new_user;a[e.target.name]=e.target.value,a.name=""!==a.first_name&&""!==a.last_name?a.first_name+" "+a.last_name:"",a.username=""!==a.email?a.email:"",this.setState({new_user:a})}},{key:"handleChangeCompanyType",value:function(e){var a=this.state.new_user;a.company_type=e.value,this.setState({new_user:a})}},{key:"handleChangeCompanyState",value:function(e){var a=this.state.new_user;a.company_state=e.value,this.setState({new_user:a})}},{key:"handlePassword",value:function(e,a){if(e.isValid){var t=this.state.new_user;t.password=e.password,this.setState({new_user:t})}}},{key:"render",value:function(){var e=this.props.user,a=this.state.new_user,t=a.company_type;if(""!==t)for(var l=0;l<b.b.length;l++){var o=b.b[l];t===o.value&&(t=o)}var s=a.company_state;if(""!==s)for(var r=0;r<b.g.length;r++){var c=b.g[r];s===c.value&&(s=c)}var m=e?i.a.createElement("div",null,i.a.createElement("h3",null,"Your Account Details"),i.a.createElement("p",null,"Welcome back ",i.a.createElement("em",null,e.user_display_name),"."),i.a.createElement("table",{className:"table table-sm"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Your email:"),i.a.createElement("td",null,e.user_email)),i.a.createElement("tr",null,i.a.createElement("td",null,"Your status:"),i.a.createElement("td",null,e.status)))),i.a.createElement("div",{className:"text-right"},i.a.createElement("hr",null),i.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:v.a.logoutUser},"Logout"))):i.a.createElement(f,{hydrateStateWithLocalStorage:this.props.hydrateStateWithLocalStorage}),u={option:function(e,a){var t=a.data;a.isDisabled,a.isFocused,a.isSelected;return Object(n.a)(Object(n.a)({},e),{},{fontSize:""===t.value?"13px":"16px"})}};return i.a.createElement("div",{className:"checkout"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-lg"},m),i.a.createElement("div",{className:"col-lg"},i.a.createElement("h3",null,"Create an Account"),i.a.createElement("form",null,i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"First name",name:"first_name",value:a.first_name,onChange:this.handleChange})),i.a.createElement("div",{className:"col"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Last name",name:"last_name",value:a.last_name,onChange:this.handleChange}))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement("input",{type:"email",className:"form-control",placeholder:"Your company email",autoComplete:"off",name:"email",value:a.email,onChange:this.handleChange}))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement(_.a,{style:{border:"none"},inputProps:{className:"form-control",placeholder:"Password",autoComplete:"new-password"},minLength:5,minScore:2,changeCallback:this.handlePassword}))),i.a.createElement("hr",null),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col-md-9"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Company/Account Name",autoComplete:"off",name:"company_name",value:a.company_name,onChange:this.handleChange})),i.a.createElement("div",{className:"col-md-3"},i.a.createElement(y.a,{name:"company_type",onChange:this.handleChangeCompanyType,placeholder:"Type...",options:b.b,value:t}))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement("textarea",{className:"form-control",name:"company_street",rows:"2",placeholder:"Address",onChange:this.handleChange,value:a.company_street}))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"City",name:"company_city",value:a.company_city,onChange:this.handleChange})),i.a.createElement("div",{className:"col"},i.a.createElement(E.a,{onChange:this.handleChangeCompanyState,multi:!1,placeholder:"State/Prov/Region...",name:"company_state",options:b.g,styles:u})),i.a.createElement("div",{className:"col-md-2"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Zip",name:"company_zip",value:a.company_zip,onChange:this.handleChange}))),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col"},i.a.createElement("input",{type:"text",className:"form-control",placeholder:"Country",name:"company_country",value:a.company_country,onChange:this.handleChange}))),i.a.createElement("hr",null),i.a.createElement("div",{className:"form-row"},i.a.createElement("div",{className:"col text-right"},i.a.createElement("p",null,i.a.createElement("small",null,"All fields are required unless noted.")),!this.state.isRegistering&&i.a.createElement("button",{type:"button",className:"btn btn-primary",name:"register-user",onClick:this.handleRegister},"Register"),this.state.isRegistering&&i.a.createElement("button",{type:"button",className:"btn btn-secondary",name:"register-user",disabled:"disabled"},"Register")))))))}}]),t}(m.Component);a.default=w}}]);
//# sourceMappingURL=11.4438acc4.chunk.js.map